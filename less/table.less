@import "shared/mixins-and-vars";
 
@table-header-height: 2em; 


.sticky-table {

    &__keyboard-instructions {
        display: none;
        background: black;
        color: white;
        padding: 10px;
        font-size: (12/@px);
        position: absolute;
        top: 0;
    }

    &__container {
        overflow: auto;
        max-height: 70vh;
        position: relative;


        &:focus {
            outline: @focus-color 2px solid;

            .sticky-table__keyboard-instructions {
                display: block;
            }
        }
    

        table,
        [role="table"] {
            margin-bottom: 0;
            position: relative;
            border: solid 1px black;
        }

        thead {
            background: white;
            transform: translateZ(1px)
        }

        th[scope="col"],
        [role="columnheader"] {    
            .sticky();
            top: 0;
        }

        th[scope="row"],
        [role="rowheader"] {
            .sticky();
            left: 0;
        }
    }

    &__sticky-horiz-heading {
        .sticky();
        left: 0;
        z-index: 1;
    }

}

caption,
.caption,
figcaption {
    display: table-caption;
    text-align: center;
    font-style: italic;
    font-family: "Times New Roman", serif;
    .width-fit-content();
    margin: 1em auto;
    position: relative;

    /* 
        * The decorations around the captions are for tablet and up,
        * since mobile doesn't have enough room
        */
    @media @tablet-up {
        &:before,
        &:after {
            display: inline-block;
            content: url(../images/squiggly.png);
            position: absolute;
            margin: 0 1em;
            top: 3px;
        }
        
        &:before {
            left: -110px;
        }
        &:after {
            transform: scaleX(-1);
        }
    }
}

figcaption.caption {
    display: block;
    margin-top: 1em;
}

table,
[role="table"] {
	width: 100%;
	max-width: 1024px;
    border-collapse: collapse;
    display: table;

    figure & {
        margin-bottom: 0;
    }

    

    th,td,
    [role="columnheader"], [role="rowheader"], [role="cell"] {
        line-height: 1.2;
        text-align: left;
        padding: 10px;
        display: table-cell;
        font-size: (14/@px);
    }

    th,
    [role="columnheader"], [role="rowheader"] {
        font-weight: bold;
        color: white;
        background-color: black;
    }

    tr, 
    [role="row"] {
        display: table-row;
        background-color: #fff;

        &:nth-child(2n) {
            background-color: #cccccc;
        }
    }

    [role="rowgroup"] {
        display: table-row-group;
    }


    @table-width: 100%;
    @table-column-width: @table-width / 7; 
    @table-body-height: 80vh;

    &.fixed-headers {
        border-collapse: collapse;
        
        &,
        & thead,
        & .thead {
            width: @table-width;
        }
        
        td, th,
        [role="columnheader"], [role="rowheader"], [role="cell"] {
            overflow: hidden;
            width: @table-column-width;
            max-width: @table-column-width;
            -webkit-hyphens: auto;
            -moz-hyphens: auto;
            -ms-hyphens: auto;
            -o-hyphens: auto;
            hyphens: auto;
        }

        
        th,
        [role="columnheader"], [role="rowheader"] {
            border-left: solid 1px #fff;
            border-right: solid 1px #fff;
        }

        td,
        [role="cell"] {
            border-left: solid 1px #cccccc;
            border-right: solid 1px #cccccc;
        }
        thead,
        .thead {
            
            tr {
            display: block;
            position: relative;
            }
        }
        tbody,
        .tbody {
            display: block;
            overflow: auto;
            width: calc(~"100% + 16px");
            height: @table-body-height;
            
        }
    }
}
